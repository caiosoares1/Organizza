<div class="dad">
  <div class="main-container">
    <h1 class="register-title">Criar Conta</h1>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" aria-label="Formulário de cadastro">
      <mat-form-field appearance="fill" class="accessible-field">
        <mat-label>Nome Completo</mat-label>
        <input 
          matInput 
          id="name" 
          formControlName="name"
          type="text"
          autocomplete="name"
          aria-describedby="name-error"
          aria-required="true">
        <mat-error id="name-error" *ngIf="registerForm.get('name')?.hasError('required')">
          É necessário informar o nome completo.
        </mat-error>
        <mat-error id="name-error" *ngIf="registerForm.get('name')?.hasError('minlength') && !registerForm.get('name')?.hasError('required')">
          O nome deve ter pelo menos 2 caracteres.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="accessible-field">
        <mat-label>Email</mat-label>
        <input 
          matInput 
          id="email" 
          formControlName="email"
          type="email"
          autocomplete="email"
          aria-describedby="email-error"
          aria-required="true">
        <mat-error id="email-error" *ngIf="registerForm.get('email')?.hasError('required')">
          É necessário informar o email.
        </mat-error>
        <mat-error id="email-error" *ngIf="registerForm.get('email')?.hasError('email') && !registerForm.get('email')?.hasError('required')">
          Formato de email inválido.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="accessible-field">
        <mat-label>Senha</mat-label>
        <input 
          matInput  
          [type]="hidePw ? 'password' : 'text'" 
          formControlName="password" 
          required
          autocomplete="new-password"
          aria-describedby="password-error password-help"
          aria-required="true">
        <mat-icon 
          matSuffix 
          (click)="togglePasswordVisibility()"
          (keydown)="togglePasswordVisibility($event)"
          [attr.aria-label]="hidePw ? 'Mostrar senha' : 'Ocultar senha'"
          tabindex="0"
          role="button">
          {{hidePw ? 'visibility_off' : 'visibility'}}
        </mat-icon>
        <mat-error id="password-error" *ngIf="registerForm.get('password')?.hasError('required')">
          É necessário informar uma senha.
        </mat-error>
        <mat-error id="password-error" *ngIf="registerForm.get('password')?.hasError('minlength') && !registerForm.get('password')?.hasError('required')">
          A senha deve ter pelo menos 8 caracteres.
        </mat-error>
        <mat-error id="password-error" *ngIf="registerForm.get('password')?.hasError('pattern') && !registerForm.get('password')?.hasError('required') && !registerForm.get('password')?.hasError('minlength')">
          A senha deve conter pelo menos uma letra maiúscula, uma minúscula e um número.
        </mat-error>
      </mat-form-field>
      
      <div id="password-help" class="password-help">
        A senha deve ter pelo menos 8 caracteres, incluindo uma letra maiúscula, uma minúscula e um número.
      </div>
      
      <button 
        mat-raised-button 
        color="primary" 
        type="submit" 
        class="register-button"
        [disabled]="registerForm.invalid">
        Criar Conta
      </button>
      
      <div *ngIf="errorMessage" class="error-message" role="alert" aria-live="assertive">
        {{errorMessage}}
      </div>
      
      <div *ngIf="successMessage" class="success-message" role="alert" aria-live="polite">
        {{successMessage}}
      </div>
      
      <p class="login-link">
        Já possui uma conta? 
        <a routerLink="/login" aria-label="Ir para página de login">Fazer login</a>
      </p>
    </form>
  </div>
</div>
